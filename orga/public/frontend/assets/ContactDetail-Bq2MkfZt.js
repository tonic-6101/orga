var N=(W,q,R)=>new Promise((j,K)=>{var F=b=>{try{g(R.next(b))}catch(d){K(d)}},T=b=>{try{g(R.throw(b))}catch(d){K(d)}},g=b=>b.done?j(b.value):Promise.resolve(b.value).then(F,T);g((R=R.apply(W,q)).next())});import{d as nt,q as m,w as rt,b as l,k as dt,c as n,j as tt,e as t,t as a,u as r,_ as s,h as Y,I as at,f as _,g as w,n as I,v as ot,p as c,i as h,T as it,s as Z,a5 as gt,A as ut,Q as Dt,o as St,F as z,r as X,L as f,U as It,x as Rt,M as Tt,O as Vt,X as Ut}from"./main-BV0KycqK.js";import{F as st}from"./FormField-Cvvkt7z9.js";const At={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto"},Mt={class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"},Nt={class:"text-lg font-semibold text-gray-800 dark:text-gray-100"},Ft=["id","placeholder"],Et={class:"grid grid-cols-2 gap-4"},Bt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Lt={value:"Workmanship"},Ot={value:"Material"},Kt={value:"Safety"},Ht={value:"Compliance"},Pt={value:"Other"},zt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Wt={value:"Low"},qt={value:"Medium"},Gt={value:"High"},Jt={value:"Critical"},Qt={class:"grid grid-cols-2 gap-4"},Xt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Yt=["placeholder"],Zt=["id"],te={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ee=["id","placeholder"],ae={key:0,class:"p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg"},se={class:"text-sm text-red-600 dark:text-red-400"},re={class:"flex justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50"},oe=["disabled"],le=["disabled"],ne={key:0,class:"fa-solid fa-spinner fa-spin"},de=nt({__name:"CreateDefectModal",props:{isOpen:{type:Boolean},contactName:{},projectName:{}},emits:["close","created"],setup(W,{emit:q}){const R=W,j=q,{createDefect:K}=gt(),{error:F}=ut(),T=new Date().toISOString().split("T")[0],g=m({title:"",defect_type:"Workmanship",severity:"Medium",project:R.projectName||"",task:"",cost_estimate:"",description:"",reported_date:T}),b=m(!1),d=m({}),i=m({}),G=Z(()=>g.value.title.trim().length>0);function H(v){i.value[v]=!0,L(v)}function L(v){if(v==="title"&&(g.value.title.trim()?g.value.title.length>255?d.value.title=s("Title cannot exceed 255 characters"):delete d.value.title:d.value.title=s("Title is required")),v==="cost_estimate"){const x=g.value.cost_estimate;x&&(isNaN(Number(x))||Number(x)<0)?d.value.cost_estimate=s("Must be a positive number"):delete d.value.cost_estimate}}function P(){d.value={},g.value.title.trim()||(d.value.title=s("Title is required"));const v=g.value.cost_estimate;return v&&(isNaN(Number(v))||Number(v)<0)&&(d.value.cost_estimate=s("Must be a positive number")),Object.keys(d.value).length===0}function V(){return N(this,null,function*(){if(i.value={title:!0,cost_estimate:!0},!!P()){b.value=!0;try{const v={title:g.value.title,contact:R.contactName,defect_type:g.value.defect_type,severity:g.value.severity,reported_date:g.value.reported_date};g.value.project&&(v.project=g.value.project),g.value.task&&(v.task=g.value.task),g.value.cost_estimate&&(v.cost_estimate=Number(g.value.cost_estimate)),g.value.description&&(v.description=g.value.description);const x=yield K(v);j("created",{name:x.name,title:x.title}),O(),j("close")}catch(v){d.value.submit=v.message||s("Failed to create defect"),F(s("Failed to create defect"),d.value.submit)}finally{b.value=!1}}})}function O(){g.value={title:"",defect_type:"Workmanship",severity:"Medium",project:R.projectName||"",task:"",cost_estimate:"",description:"",reported_date:T},d.value={},i.value={}}function E(){O(),j("close")}return rt(()=>R.isOpen,v=>{v||O()}),(v,x)=>(l(),dt(it,{to:"body"},[W.isOpen?(l(),n("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:tt(E,["self"])},[t("div",At,[t("div",Mt,[t("h2",Nt,a(r(s)("Report Defect")),1),t("button",{onClick:E,class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded"},[...x[11]||(x[11]=[t("i",{class:"fa-solid fa-xmark text-xl"},null,-1)])])]),t("form",{onSubmit:tt(V,["prevent"]),class:"p-4 space-y-4"},[Y(st,{label:r(s)("Title"),required:!0,error:d.value.title,touched:i.value.title,"max-length":255,"current-length":g.value.title.length,"show-success":g.value.title.trim().length>0,hint:r(s)("Brief description of the defect or damage")},{default:at(({id:C,hasError:A,isValid:U})=>[_(t("input",{id:C,"onUpdate:modelValue":x[0]||(x[0]=B=>g.value.title=B),type:"text",maxlength:"255",placeholder:r(s)("e.g. Cracked wall finish in bathroom..."),onBlur:x[1]||(x[1]=B=>H("title")),onInput:x[2]||(x[2]=B=>i.value.title&&L("title")),class:I(["w-full px-3 py-2 border rounded-lg text-sm transition-colors","bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100","focus:outline-none focus:ring-2",A?"border-red-500 focus:ring-red-500/20 focus:border-red-500":U?"border-green-500 focus:ring-green-500/20 focus:border-green-500":"border-gray-300 dark:border-gray-600 focus:ring-orga-500/20 focus:border-orga-500"])},null,42,Ft),[[w,g.value.title]])]),_:1},8,["label","error","touched","current-length","show-success","hint"]),t("div",Et,[t("div",null,[t("label",Bt,a(r(s)("Defect Type")),1),_(t("select",{"onUpdate:modelValue":x[3]||(x[3]=C=>g.value.defect_type=C),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100"},[t("option",Lt,a(r(s)("Workmanship")),1),t("option",Ot,a(r(s)("Material")),1),t("option",Kt,a(r(s)("Safety")),1),t("option",Ht,a(r(s)("Compliance")),1),t("option",Pt,a(r(s)("Other")),1)],512),[[ot,g.value.defect_type]])]),t("div",null,[t("label",zt,a(r(s)("Severity")),1),_(t("select",{"onUpdate:modelValue":x[4]||(x[4]=C=>g.value.severity=C),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100"},[t("option",Wt,a(r(s)("Low")),1),t("option",qt,a(r(s)("Medium")),1),t("option",Gt,a(r(s)("High")),1),t("option",Jt,a(r(s)("Critical")),1)],512),[[ot,g.value.severity]])])]),t("div",Qt,[t("div",null,[t("label",Xt,a(r(s)("Project")),1),_(t("input",{"onUpdate:modelValue":x[5]||(x[5]=C=>g.value.project=C),type:"text",placeholder:r(s)("Project code (e.g. ORG-2026-0001)"),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100"},null,8,Yt),[[w,g.value.project]])]),Y(st,{label:r(s)("Estimated Cost"),error:d.value.cost_estimate,touched:i.value.cost_estimate},{default:at(({id:C,hasError:A})=>[_(t("input",{id:C,"onUpdate:modelValue":x[6]||(x[6]=U=>g.value.cost_estimate=U),type:"text",inputmode:"decimal",placeholder:"0.00",onBlur:x[7]||(x[7]=U=>H("cost_estimate")),onInput:x[8]||(x[8]=U=>i.value.cost_estimate&&L("cost_estimate")),class:I(["w-full px-3 py-2 border rounded-lg text-sm transition-colors","bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100","focus:outline-none focus:ring-2",A?"border-red-500 focus:ring-red-500/20 focus:border-red-500":"border-gray-300 dark:border-gray-600 focus:ring-orga-500/20 focus:border-orga-500"])},null,42,Zt),[[w,g.value.cost_estimate]])]),_:1},8,["label","error","touched"])]),t("div",null,[t("label",te,a(r(s)("Reported Date")),1),_(t("input",{"onUpdate:modelValue":x[9]||(x[9]=C=>g.value.reported_date=C),type:"date",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100"},null,512),[[w,g.value.reported_date]])]),Y(st,{label:r(s)("Description"),hint:r(s)("Detailed description of the defect, location, and impact")},{default:at(({id:C})=>[_(t("textarea",{id:C,"onUpdate:modelValue":x[10]||(x[10]=A=>g.value.description=A),rows:"3",placeholder:r(s)("Describe the defect in detail..."),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-orga-500/20 focus:border-orga-500 transition-colors"},null,8,ee),[[w,g.value.description]])]),_:1},8,["label","hint"]),d.value.submit?(l(),n("div",ae,[t("p",se,a(d.value.submit),1)])):c("",!0)],32),t("div",re,[t("button",{type:"button",onClick:E,disabled:b.value,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50"},a(r(s)("Cancel")),9,oe),t("button",{type:"submit",onClick:V,disabled:b.value||!G.value,class:"px-4 py-2 text-sm font-medium text-white bg-orga-500 rounded-lg hover:bg-orga-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[b.value?(l(),n("i",ne)):c("",!0),h(" "+a(b.value?r(s)("Creating..."):r(s)("Report Defect")),1)],8,le)])])])):c("",!0)]))}}),ie={class:"max-w-6xl mx-auto px-4 py-6"},ge={key:0,class:"flex items-center justify-center py-20"},ue={class:"text-center"},xe={class:"text-sm text-gray-500 dark:text-gray-400"},ye={key:1,class:"flex items-center justify-center py-20"},ce={class:"text-center"},pe={class:"text-sm text-red-500 mb-4"},ve={class:"flex items-start justify-between mb-6"},be={class:"flex items-center gap-4"},ke={class:"w-14 h-14 rounded-full bg-teal-500 text-white text-xl font-semibold flex items-center justify-center flex-shrink-0"},fe={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},me={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},_e={key:0},he={class:"flex gap-2 mt-1"},we={class:"flex gap-2"},Ce={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},$e={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},je={class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},De={class:"text-2xl font-bold text-gray-800 dark:text-gray-100 mt-1"},Se={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},Ie={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},Re={class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},Te={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},Ve={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},Ue={class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},Ae={class:"text-2xl font-bold text-gray-800 dark:text-gray-100 mt-1"},Me={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},Ne={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},Fe={class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},Ee={class:"text-2xl font-bold text-gray-800 dark:text-gray-100 mt-1"},Be={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},Le={class:"border-b border-gray-200 dark:border-gray-700 mb-6"},Oe={class:"flex gap-1"},Ke=["onClick"],He={key:0,class:"ml-1.5 px-1.5 py-0.5 text-xs rounded-full bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400"},Pe={key:1,class:"space-y-6"},ze={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-5"},We={class:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-4"},qe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4"},Ge={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},Je={key:0,class:"flex items-center gap-1"},Qe={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},Xe={key:0,class:"flex items-center gap-1"},Ye={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},Ze={key:0,class:"flex items-center gap-1"},ta={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},ea={key:0,class:"flex items-center gap-1"},aa={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},sa={key:0,class:"flex items-center gap-1"},ra={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},oa={key:0,class:"flex items-center gap-1"},la={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},na={class:"text-sm text-gray-800 dark:text-gray-200"},da={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},ia={key:0,class:"flex items-center gap-1"},ga={class:"md:col-span-2 lg:col-span-3"},ua={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},xa={key:0,class:"flex items-start gap-1"},ya={class:"flex flex-col gap-1"},ca={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-5"},pa={class:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-4"},va={class:"grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-4"},ba={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},ka={key:0,class:"flex items-center gap-1"},fa={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},ma={key:0,class:"flex items-center gap-1"},_a={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},ha={key:0,class:"flex items-center gap-1"},wa={class:"text-xs text-gray-500 dark:text-gray-400 mb-0.5"},Ca={key:0,class:"flex items-center gap-1"},$a={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-5"},ja={class:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-3"},Da=["placeholder"],Sa={class:"flex justify-end gap-2 mt-2"},Ia=["innerHTML"],Ra={key:1,class:"text-sm text-gray-400 dark:text-gray-500 italic"},Ta={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Va={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},Ua={class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-3"},Aa={class:"space-y-2"},Ma={class:"flex justify-between text-sm"},Na={class:"text-gray-600 dark:text-gray-300"},Fa={class:"font-medium text-gray-800 dark:text-gray-100"},Ea={class:"flex justify-between text-sm"},Ba={class:"text-gray-600 dark:text-gray-300"},La={class:"font-medium text-gray-800 dark:text-gray-100"},Oa={class:"flex justify-between text-sm"},Ka={class:"text-gray-600 dark:text-gray-300"},Ha={class:"font-medium text-gray-800 dark:text-gray-100"},Pa={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},za={class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-3"},Wa={class:"space-y-2"},qa={class:"flex justify-between text-sm"},Ga={class:"text-gray-600 dark:text-gray-300"},Ja={class:"font-medium text-gray-800 dark:text-gray-100"},Qa={class:"flex justify-between text-sm"},Xa={class:"text-gray-600 dark:text-gray-300"},Ya={class:"font-medium text-gray-800 dark:text-gray-100"},Za={class:"flex justify-between text-sm"},ts={class:"text-gray-600 dark:text-gray-300"},es={class:"font-medium text-gray-800 dark:text-gray-100"},as={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},ss={class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-3"},rs={class:"space-y-2"},os={class:"flex justify-between text-sm"},ls={class:"text-gray-600 dark:text-gray-300"},ns={class:"font-medium text-gray-800 dark:text-gray-100"},ds={class:"flex justify-between text-sm"},is={class:"text-gray-600 dark:text-gray-300"},gs={class:"flex justify-between text-sm"},us={class:"text-gray-600 dark:text-gray-300"},xs={class:"font-medium text-gray-800 dark:text-gray-100"},ys={key:2,class:"space-y-4"},cs={class:"flex items-center justify-between"},ps={class:"text-sm font-semibold text-gray-800 dark:text-gray-100"},vs={key:0,class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},bs={class:"flex-1"},ks={class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},fs=["placeholder"],ms={class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},_s={value:"Beginner"},hs={value:"Intermediate"},ws={value:"Advanced"},Cs={value:"Expert"},$s=["disabled"],js={key:1,class:"space-y-2"},Ds={class:"flex items-center gap-3"},Ss={class:"text-sm font-medium text-gray-800 dark:text-gray-100"},Is={class:"flex items-center gap-2 mt-1"},Rs={key:0,class:"text-xs text-gray-400 dark:text-gray-500"},Ts=["onClick","title"],Vs={key:2,class:"text-center py-10 text-gray-400 dark:text-gray-500"},Us={class:"text-sm"},As={key:3,class:"space-y-4"},Ms={class:"text-sm font-semibold text-gray-800 dark:text-gray-100"},Ns={key:0,class:"space-y-2"},Fs={class:"flex items-start justify-between"},Es={class:"flex-1 min-w-0"},Bs={class:"text-sm font-medium text-gray-800 dark:text-gray-100 truncate"},Ls={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},Os={class:"flex items-center gap-3 mt-2 text-xs text-gray-400 dark:text-gray-500"},Ks={key:0},Hs={key:1},Ps={key:2},zs={key:3},Ws={key:4},qs={key:1,class:"text-center py-10 text-gray-400 dark:text-gray-500"},Gs={class:"text-sm"},Js={key:2,class:"text-center py-10"},Qs={key:4,class:"space-y-4"},Xs={class:"flex items-center justify-between"},Ys={class:"text-sm font-semibold text-gray-800 dark:text-gray-100"},Zs={key:0,class:"grid grid-cols-3 gap-4"},tr={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 text-center"},er={class:"text-lg font-bold text-gray-800 dark:text-gray-100"},ar={class:"text-xs text-gray-500 dark:text-gray-400"},sr={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 text-center"},rr={class:"text-xs text-gray-500 dark:text-gray-400"},or={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 text-center"},lr={class:"text-lg font-bold text-gray-800 dark:text-gray-100"},nr={class:"text-xs text-gray-500 dark:text-gray-400"},dr={key:1,class:"space-y-2"},ir={class:"flex items-start justify-between"},gr={class:"flex-1 min-w-0"},ur={class:"text-sm font-medium text-gray-800 dark:text-gray-100"},xr={class:"flex items-center gap-2 mt-1.5"},yr={class:"text-xs text-gray-400 dark:text-gray-500"},cr={class:"flex items-center gap-3 mt-2 text-xs text-gray-400 dark:text-gray-500"},pr={key:0},vr={key:1},br={key:2},kr={key:2,class:"text-center py-10 text-gray-400 dark:text-gray-500"},fr={class:"text-sm"},mr={key:3,class:"text-center py-10"},_r={key:5,class:"space-y-6"},hr={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},wr={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-5"},Cr={class:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-4"},$r={class:"space-y-3"},jr={class:"flex justify-between"},Dr={class:"text-sm text-gray-600 dark:text-gray-300"},Sr={class:"text-sm font-medium text-gray-800 dark:text-gray-100"},Ir={class:"flex justify-between"},Rr={class:"text-sm text-gray-600 dark:text-gray-300"},Tr={class:"text-sm font-medium text-gray-800 dark:text-gray-100"},Vr={key:0,class:"flex justify-between"},Ur={class:"text-sm text-gray-600 dark:text-gray-300"},Ar={class:"text-sm font-medium text-green-600 dark:text-green-400"},Mr={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-5"},Nr={class:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-4"},Fr={class:"space-y-3"},Er={class:"flex justify-between"},Br={class:"text-sm text-gray-600 dark:text-gray-300"},Lr={class:"text-sm font-medium text-gray-800 dark:text-gray-100"},Or={class:"flex justify-between"},Kr={class:"text-sm text-gray-600 dark:text-gray-300"},Hr={class:"text-sm font-medium text-gray-800 dark:text-gray-100"},Pr={class:"flex justify-between"},zr={class:"text-sm text-gray-600 dark:text-gray-300"},Wr={class:"text-sm font-medium text-gray-800 dark:text-gray-100"},qr={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-5 md:col-span-2"},Gr={class:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-4"},Jr={class:"grid grid-cols-3 gap-4"},Qr={class:"text-xs text-gray-500 dark:text-gray-400"},Xr={class:"text-xs text-gray-500 dark:text-gray-400"},Yr={class:"text-lg font-bold text-gray-800 dark:text-gray-100 mt-1"},Zr={class:"text-xs text-gray-500 dark:text-gray-400"},to={class:"text-lg font-bold text-gray-800 dark:text-gray-100 mt-1"},eo={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full mx-4 p-6"},ao={class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2"},so={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},ro={class:"flex justify-end gap-3"},io=nt({__name:"ContactDetail",setup(W){const q=Vt(),R=Rt(),j=Ut(),K=gt(),{success:F,error:T}=ut(),{formatCurrency:g}=Dt(),b=Z(()=>q.params.id),d=m(null),i=m(null),G=m([]),H=m([]),L=m(!0),P=m(null),V=m("overview"),O=m(!1),E=m(!1),v=m(!1),x=m(""),C=m("Intermediate"),A=m(!1),U=m(!1),B=m(!1),$=m(null),y=m(null),et=m(!1),D=m(null);function S(u,e){$.value=u,y.value=e,Tt(()=>{var M;return(M=D.value)==null?void 0:M.focus()})}function p(){$.value=null,y.value=null}function k(u){return N(this,null,function*(){if(!d.value||et.value)return;const e=d.value[u];if(y.value===e){p();return}et.value=!0;try{yield j.updateContact(d.value.name,{[u]:y.value}),d.value[u]=y.value,p(),F(s("Updated successfully"))}catch(M){T(s("Update failed"),M.message)}finally{et.value=!1}})}const xt=Z(()=>[{id:"overview",label:s("Overview")},{id:"skills",label:s("Skills")},{id:"assignments",label:s("Assignments")},{id:"defects",label:s("Defects")},{id:"financial",label:s("Financial")}]);function yt(u){return{Active:"bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400",Inactive:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400","On Leave":"bg-orange-100 dark:bg-orange-900/40 text-orange-600 dark:text-orange-400"}[u]||"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}function ct(u){return{Employee:"bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-400",Contractor:"bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400",External:"bg-teal-100 dark:bg-teal-900/40 text-teal-600 dark:text-teal-400"}[u]||"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}function pt(u){return{Beginner:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",Intermediate:"bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-400",Advanced:"bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400",Expert:"bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400"}[u]||"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}function vt(u){return{Low:"bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-400",Medium:"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-600 dark:text-yellow-400",High:"bg-orange-100 dark:bg-orange-900/40 text-orange-600 dark:text-orange-400",Critical:"bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400"}[u]||"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}function bt(u){return{Open:"bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400","In Progress":"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-600 dark:text-yellow-400",Resolved:"bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400",Closed:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}[u]||"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}function kt(u){return{Assigned:"bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-400","In Progress":"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-600 dark:text-yellow-400",Completed:"bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400",Cancelled:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}[u]||"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}function ft(u){const e=u.split(" ");return e.length>=2?(e[0][0]+e[e.length-1][0]).toUpperCase():u.substring(0,2).toUpperCase()}function Q(u){return u?new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}const mt=Z(()=>{var e,M;const u=(e=i.value)!=null&&e.assignments.active&&((M=d.value)==null?void 0:M.utilization_percent)||0;return u>100?"text-red-600 dark:text-red-400":u>80?"text-orange-600 dark:text-orange-400":u>50?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"});function J(){return N(this,null,function*(){L.value=!0,P.value=null;try{const[u,e]=yield Promise.all([j.getContact(b.value),j.getContactStats(b.value)]);d.value=u,i.value=e}catch(u){P.value=u.message||s("Failed to load contact")}finally{L.value=!1}})}function lt(){return N(this,null,function*(){if(!U.value)try{const u=yield K.getDefects({contact:b.value,limit:100});G.value=u.defects,U.value=!0}catch(u){T(s("Failed to load defects"),u.message)}})}function _t(){return N(this,null,function*(){if(!B.value)try{const u=yield j.getContactTimeline(b.value,50);H.value=u.timeline,B.value=!0}catch(u){T(s("Failed to load assignments"),u.message)}})}rt(V,u=>{u==="defects"&&lt(),u==="assignments"&&_t()});function ht(){return N(this,null,function*(){if(x.value.trim()){A.value=!0;try{yield j.addSkill(b.value,x.value,C.value),F(s("Skill added")),x.value="",C.value="Intermediate",v.value=!1,yield J()}catch(u){T(s("Failed to add skill"),u.message)}finally{A.value=!1}}})}function wt(u){return N(this,null,function*(){try{yield j.removeSkill(b.value,u),F(s("Skill removed")),yield J()}catch(e){T(s("Failed to remove skill"),e.message)}})}function Ct(){return N(this,null,function*(){try{yield j.deleteContact(b.value),F(s("Contact deleted")),R.push("/orga/contacts")}catch(u){T(s("Failed to delete contact"),u.message)}})}function $t(){U.value=!1,lt(),j.getContactStats(b.value).then(u=>{i.value=u})}return St(()=>{J()}),rt(b,()=>{U.value=!1,B.value=!1,J()}),(u,e)=>{var M;return l(),n("div",ie,[L.value?(l(),n("div",ge,[t("div",ue,[e[60]||(e[60]=t("i",{class:"fa-solid fa-spinner fa-spin text-3xl text-orga-500 mb-3"},null,-1)),t("p",xe,a(r(s)("Loading contact...")),1)])])):P.value?(l(),n("div",ye,[t("div",ce,[e[61]||(e[61]=t("i",{class:"fa-solid fa-exclamation-circle text-3xl text-red-400 mb-3"},null,-1)),t("p",pe,a(P.value),1),t("button",{onClick:J,class:"px-4 py-2 text-sm bg-orga-500 text-white rounded-lg hover:bg-orga-600"},a(r(s)("Retry")),1)])])):d.value?(l(),n(z,{key:2},[t("div",ve,[t("div",be,[t("button",{onClick:e[0]||(e[0]=o=>r(R).push("/orga/contacts")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800"},[...e[62]||(e[62]=[t("i",{class:"fa-solid fa-arrow-left"},null,-1)])]),t("div",ke,a(d.value.initials||ft(d.value.resource_name)),1),t("div",null,[t("h1",fe,a(d.value.resource_name),1),d.value.designation?(l(),n("p",me,[h(a(d.value.designation)+" ",1),d.value.department?(l(),n("span",_e," · "+a(d.value.department),1)):c("",!0)])):c("",!0),t("div",he,[t("span",{class:I(["px-2 py-0.5 rounded-full text-xs font-medium",yt(d.value.status)])},a(d.value.status),3),d.value.resource_type?(l(),n("span",{key:0,class:I(["px-2 py-0.5 rounded-full text-xs font-medium",ct(d.value.resource_type)])},a(d.value.resource_type),3)):c("",!0)])])]),t("div",we,[t("button",{onClick:e[1]||(e[1]=o=>E.value=!0),class:"px-3 py-2 text-sm text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20"},[e[63]||(e[63]=t("i",{class:"fa-solid fa-trash-can mr-1"},null,-1)),h(" "+a(r(s)("Delete")),1)])])]),i.value?(l(),n("div",Ce,[t("div",$e,[t("p",je,a(r(s)("Active Assignments")),1),t("p",De,a(i.value.assignments.active),1),t("p",Se,a(r(s)("{0} total",[i.value.assignments.total])),1)]),t("div",Ie,[t("p",Re,a(r(s)("Utilization")),1),t("p",{class:I(["text-2xl font-bold mt-1",mt.value])},a(Math.round(d.value.utilization_percent||0))+"% ",3),t("p",Te,a(r(s)("{0}h/week capacity",[d.value.weekly_capacity])),1)]),t("div",Ve,[t("p",Ue,a(r(s)("Hours Logged")),1),t("p",Ae,a(Math.round(i.value.time_logs.total_hours)),1),t("p",Me,a(r(s)("{0}h billable",[Math.round(i.value.time_logs.billable_hours)])),1)]),t("div",Ne,[t("p",Fe,a(r(s)("Projects")),1),t("p",Ee,a(i.value.projects.total),1),t("p",Be,a(r(s)("{0} active",[i.value.projects.active_count])),1)])])):c("",!0),t("div",Le,[t("div",Oe,[(l(!0),n(z,null,X(xt.value,o=>(l(),n("button",{key:o.id,onClick:jt=>V.value=o.id,class:I(["px-4 py-2.5 text-sm font-medium border-b-2 -mb-px transition-colors",V.value===o.id?"border-orga-500 text-orga-600 dark:text-orga-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"])},[h(a(o.label)+" ",1),o.id==="defects"&&i.value&&i.value.defects.open>0?(l(),n("span",He,a(i.value.defects.open),1)):c("",!0)],10,Ke))),128))])]),V.value==="overview"?(l(),n("div",Pe,[t("div",ze,[t("h3",We,a(r(s)("Contact Information")),1),t("div",qe,[t("div",null,[t("p",Ge,a(r(s)("Email")),1),$.value==="email"?(l(),n("div",Je,[_(t("input",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[2]||(e[2]=o=>y.value=o),type:"email",onKeydown:[e[3]||(e[3]=f(o=>k("email"),["enter"])),f(p,["escape"])],class:"flex-1 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500"},null,544),[[w,y.value]]),t("button",{onClick:e[4]||(e[4]=o=>k("email")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[64]||(e[64]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[65]||(e[65]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])):(l(),n("p",{key:1,onClick:e[5]||(e[5]=o=>S("email",d.value.email)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group"},[h(a(d.value.email||"-")+" ",1),e[66]||(e[66]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))]),t("div",null,[t("p",Qe,a(r(s)("Phone")),1),$.value==="phone"?(l(),n("div",Xe,[_(t("input",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[6]||(e[6]=o=>y.value=o),type:"tel",onKeydown:[e[7]||(e[7]=f(o=>k("phone"),["enter"])),f(p,["escape"])],class:"flex-1 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500"},null,544),[[w,y.value]]),t("button",{onClick:e[8]||(e[8]=o=>k("phone")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[67]||(e[67]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[68]||(e[68]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])):(l(),n("p",{key:1,onClick:e[9]||(e[9]=o=>S("phone",d.value.phone)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group"},[h(a(d.value.phone||"-")+" ",1),e[69]||(e[69]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))]),t("div",null,[t("p",Ye,a(r(s)("Mobile")),1),$.value==="mobile_no"?(l(),n("div",Ze,[_(t("input",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[10]||(e[10]=o=>y.value=o),type:"tel",onKeydown:[e[11]||(e[11]=f(o=>k("mobile_no"),["enter"])),f(p,["escape"])],class:"flex-1 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500"},null,544),[[w,y.value]]),t("button",{onClick:e[12]||(e[12]=o=>k("mobile_no")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[70]||(e[70]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[71]||(e[71]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])):(l(),n("p",{key:1,onClick:e[13]||(e[13]=o=>S("mobile_no",d.value.mobile_no)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group"},[h(a(d.value.mobile_no||"-")+" ",1),e[72]||(e[72]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))]),t("div",null,[t("p",ta,a(r(s)("Department")),1),$.value==="department"?(l(),n("div",ea,[_(t("input",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[14]||(e[14]=o=>y.value=o),type:"text",onKeydown:[e[15]||(e[15]=f(o=>k("department"),["enter"])),f(p,["escape"])],class:"flex-1 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500"},null,544),[[w,y.value]]),t("button",{onClick:e[16]||(e[16]=o=>k("department")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[73]||(e[73]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[74]||(e[74]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])):(l(),n("p",{key:1,onClick:e[17]||(e[17]=o=>S("department",d.value.department)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group"},[h(a(d.value.department||"-")+" ",1),e[75]||(e[75]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))]),t("div",null,[t("p",aa,a(r(s)("Designation")),1),$.value==="designation"?(l(),n("div",sa,[_(t("input",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[18]||(e[18]=o=>y.value=o),type:"text",onKeydown:[e[19]||(e[19]=f(o=>k("designation"),["enter"])),f(p,["escape"])],class:"flex-1 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500"},null,544),[[w,y.value]]),t("button",{onClick:e[20]||(e[20]=o=>k("designation")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[76]||(e[76]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[77]||(e[77]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])):(l(),n("p",{key:1,onClick:e[21]||(e[21]=o=>S("designation",d.value.designation)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group"},[h(a(d.value.designation||"-")+" ",1),e[78]||(e[78]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))]),t("div",null,[t("p",ra,a(r(s)("Company")),1),$.value==="company"?(l(),n("div",oa,[_(t("input",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[22]||(e[22]=o=>y.value=o),type:"text",onKeydown:[e[23]||(e[23]=f(o=>k("company"),["enter"])),f(p,["escape"])],class:"flex-1 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500"},null,544),[[w,y.value]]),t("button",{onClick:e[24]||(e[24]=o=>k("company")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[79]||(e[79]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[80]||(e[80]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])):(l(),n("p",{key:1,onClick:e[25]||(e[25]=o=>S("company",d.value.company)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group"},[h(a(d.value.company||"-")+" ",1),e[81]||(e[81]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))]),t("div",null,[t("p",la,a(r(s)("Reports To")),1),t("p",na,a(d.value.reports_to_name||d.value.reports_to||"-"),1)]),t("div",null,[t("p",da,a(r(s)("Date of Joining")),1),$.value==="date_of_joining"?(l(),n("div",ia,[_(t("input",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[26]||(e[26]=o=>y.value=o),type:"date",onKeydown:[e[27]||(e[27]=f(o=>k("date_of_joining"),["enter"])),f(p,["escape"])],class:"flex-1 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500"},null,544),[[w,y.value]]),t("button",{onClick:e[28]||(e[28]=o=>k("date_of_joining")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[82]||(e[82]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[83]||(e[83]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])):(l(),n("p",{key:1,onClick:e[29]||(e[29]=o=>S("date_of_joining",d.value.date_of_joining)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group"},[h(a(Q(d.value.date_of_joining))+" ",1),e[84]||(e[84]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))]),t("div",ga,[t("p",ua,a(r(s)("Address")),1),$.value==="address"?(l(),n("div",xa,[_(t("textarea",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[30]||(e[30]=o=>y.value=o),rows:"2",onKeydown:f(p,["escape"]),class:"flex-1 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500 resize-y"},null,544),[[w,y.value]]),t("div",ya,[t("button",{onClick:e[31]||(e[31]=o=>k("address")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[85]||(e[85]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[86]||(e[86]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])])):(l(),n("p",{key:1,onClick:e[32]||(e[32]=o=>S("address",d.value.address)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group whitespace-pre-line"},[h(a(d.value.address||"-")+" ",1),e[87]||(e[87]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))])])]),t("div",ca,[t("h3",pa,a(r(s)("Capacity & Rates")),1),t("div",va,[t("div",null,[t("p",ba,a(r(s)("Daily Availability")),1),$.value==="availability_hours"?(l(),n("div",ka,[_(t("input",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[33]||(e[33]=o=>y.value=o),type:"number",step:"0.5",min:"0",max:"24",onKeydown:[e[34]||(e[34]=f(o=>k("availability_hours"),["enter"])),f(p,["escape"])],class:"w-20 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500"},null,544),[[w,y.value,void 0,{number:!0}]]),e[90]||(e[90]=t("span",{class:"text-xs text-gray-400"},"h/day",-1)),t("button",{onClick:e[35]||(e[35]=o=>k("availability_hours")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[88]||(e[88]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[89]||(e[89]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])):(l(),n("p",{key:1,onClick:e[36]||(e[36]=o=>S("availability_hours",d.value.availability_hours)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group"},[h(a((M=d.value.availability_hours)!=null?M:8)+"h/day ",1),e[91]||(e[91]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))]),t("div",null,[t("p",fa,a(r(s)("Weekly Capacity")),1),$.value==="weekly_capacity"?(l(),n("div",ma,[_(t("input",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[37]||(e[37]=o=>y.value=o),type:"number",step:"1",min:"0",max:"168",onKeydown:[e[38]||(e[38]=f(o=>k("weekly_capacity"),["enter"])),f(p,["escape"])],class:"w-20 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500"},null,544),[[w,y.value,void 0,{number:!0}]]),e[94]||(e[94]=t("span",{class:"text-xs text-gray-400"},"h/week",-1)),t("button",{onClick:e[39]||(e[39]=o=>k("weekly_capacity")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[92]||(e[92]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[93]||(e[93]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])):(l(),n("p",{key:1,onClick:e[40]||(e[40]=o=>S("weekly_capacity",d.value.weekly_capacity)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group"},[h(a(d.value.weekly_capacity)+"h/week ",1),e[95]||(e[95]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))]),t("div",null,[t("p",_a,a(r(s)("Hourly Cost")),1),$.value==="hourly_cost"?(l(),n("div",ha,[_(t("input",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[41]||(e[41]=o=>y.value=o),type:"number",step:"0.01",min:"0",onKeydown:[e[42]||(e[42]=f(o=>k("hourly_cost"),["enter"])),f(p,["escape"])],class:"w-24 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500"},null,544),[[w,y.value,void 0,{number:!0}]]),t("button",{onClick:e[43]||(e[43]=o=>k("hourly_cost")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[96]||(e[96]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[97]||(e[97]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])):(l(),n("p",{key:1,onClick:e[44]||(e[44]=o=>S("hourly_cost",d.value.hourly_cost)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group"},[h(a(r(g)(d.value.hourly_cost))+"/hr ",1),e[98]||(e[98]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))]),t("div",null,[t("p",wa,a(r(s)("Billable Rate")),1),$.value==="billable_rate"?(l(),n("div",Ca,[_(t("input",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[45]||(e[45]=o=>y.value=o),type:"number",step:"0.01",min:"0",onKeydown:[e[46]||(e[46]=f(o=>k("billable_rate"),["enter"])),f(p,["escape"])],class:"w-24 px-2 py-1 text-sm border border-orga-400 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500"},null,544),[[w,y.value,void 0,{number:!0}]]),t("button",{onClick:e[47]||(e[47]=o=>k("billable_rate")),class:"text-green-500 hover:text-green-600 text-xs p-1"},[...e[99]||(e[99]=[t("i",{class:"fa-solid fa-check"},null,-1)])]),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 text-xs p-1"},[...e[100]||(e[100]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])])])):(l(),n("p",{key:1,onClick:e[48]||(e[48]=o=>S("billable_rate",d.value.billable_rate)),class:"text-sm text-gray-800 dark:text-gray-200 cursor-pointer hover:text-orga-600 dark:hover:text-orga-400 group"},[h(a(r(g)(d.value.billable_rate))+"/hr ",1),e[101]||(e[101]=t("i",{class:"fa-solid fa-pen text-[10px] text-gray-300 dark:text-gray-600 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))])])]),t("div",$a,[t("h3",ja,a(r(s)("Notes")),1),$.value==="notes"?(l(),n(z,{key:0},[_(t("textarea",{ref_key:"editInputRef",ref:D,"onUpdate:modelValue":e[49]||(e[49]=o=>y.value=o),rows:"4",onKeydown:f(p,["escape"]),class:"w-full px-3 py-2 text-sm border border-orga-400 rounded-lg bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-orga-500 resize-y",placeholder:r(s)("Add notes about this contact...")},null,40,Da),[[w,y.value]]),t("div",Sa,[t("button",{onClick:p,class:"px-3 py-1 text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},a(r(s)("Cancel")),1),t("button",{onClick:e[50]||(e[50]=o=>k("notes")),class:"px-3 py-1 text-xs bg-orga-500 text-white rounded hover:bg-orga-600"},a(r(s)("Save")),1)])],64)):(l(),n("div",{key:1,onClick:e[51]||(e[51]=o=>S("notes",d.value.notes)),class:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-750 rounded p-2 -m-2 group"},[d.value.notes?(l(),n("p",{key:0,class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-line",innerHTML:r(It)(d.value.notes)},null,8,Ia)):(l(),n("p",Ra,[h(a(r(s)("Click to add notes..."))+" ",1),e[102]||(e[102]=t("i",{class:"fa-solid fa-pen text-[10px] ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]))]))]),i.value?(l(),n("div",Ta,[t("div",Va,[t("h4",Ua,a(r(s)("Assignments")),1),t("div",Aa,[t("div",Ma,[t("span",Na,a(r(s)("Completed")),1),t("span",Fa,a(i.value.assignments.completed),1)]),t("div",Ea,[t("span",Ba,a(r(s)("Active")),1),t("span",La,a(i.value.assignments.active),1)]),t("div",Oa,[t("span",Ka,a(r(s)("Cancelled")),1),t("span",Ha,a(i.value.assignments.cancelled),1)])])]),t("div",Pa,[t("h4",za,a(r(s)("Time Tracking")),1),t("div",Wa,[t("div",qa,[t("span",Ga,a(r(s)("Total Hours")),1),t("span",Ja,a(Math.round(i.value.time_logs.total_hours))+"h",1)]),t("div",Qa,[t("span",Xa,a(r(s)("Billable")),1),t("span",Ya,a(Math.round(i.value.time_logs.billable_hours))+"h",1)]),t("div",Za,[t("span",ts,a(r(s)("Time Entries")),1),t("span",es,a(i.value.time_logs.log_count),1)])])]),t("div",as,[t("h4",ss,a(r(s)("Defects")),1),t("div",rs,[t("div",os,[t("span",ls,a(r(s)("Total")),1),t("span",ns,a(i.value.defects.total),1)]),t("div",ds,[t("span",is,a(r(s)("Open")),1),t("span",{class:I(["font-medium",i.value.defects.open>0?"text-red-600 dark:text-red-400":"text-gray-800 dark:text-gray-100"])},a(i.value.defects.open),3)]),t("div",gs,[t("span",us,a(r(s)("Cost Impact")),1),t("span",xs,a(r(g)(i.value.defects.total_cost)),1)])])])])):c("",!0)])):c("",!0),V.value==="skills"?(l(),n("div",ys,[t("div",cs,[t("h3",ps,a(r(s)("Skills & Competencies")),1),t("button",{onClick:e[52]||(e[52]=o=>v.value=!v.value),class:"px-3 py-1.5 text-sm bg-orga-500 text-white rounded-lg hover:bg-orga-600"},[e[103]||(e[103]=t("i",{class:"fa-solid fa-plus mr-1"},null,-1)),h(" "+a(r(s)("Add Skill")),1)])]),v.value?(l(),n("div",vs,[t("form",{onSubmit:tt(ht,["prevent"]),class:"flex gap-3 items-end"},[t("div",bs,[t("label",ks,a(r(s)("Skill Name")),1),_(t("input",{"onUpdate:modelValue":e[53]||(e[53]=o=>x.value=o),type:"text",placeholder:r(s)("e.g. Electrical, Plumbing..."),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100"},null,8,fs),[[w,x.value]])]),t("div",null,[t("label",ms,a(r(s)("Proficiency")),1),_(t("select",{"onUpdate:modelValue":e[54]||(e[54]=o=>C.value=o),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100"},[t("option",_s,a(r(s)("Beginner")),1),t("option",hs,a(r(s)("Intermediate")),1),t("option",ws,a(r(s)("Advanced")),1),t("option",Cs,a(r(s)("Expert")),1)],512),[[ot,C.value]])]),t("button",{type:"submit",disabled:A.value||!x.value.trim(),class:"px-4 py-2 text-sm bg-orga-500 text-white rounded-lg hover:bg-orga-600 disabled:opacity-50"},a(A.value?r(s)("Adding..."):r(s)("Add")),9,$s),t("button",{type:"button",onClick:e[55]||(e[55]=o=>v.value=!1),class:"px-3 py-2 text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},a(r(s)("Cancel")),1)],32)])):c("",!0),d.value.skills&&d.value.skills.length>0?(l(),n("div",js,[(l(!0),n(z,null,X(d.value.skills,o=>(l(),n("div",{key:o.skill_name,class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 flex items-center justify-between"},[t("div",Ds,[t("div",null,[t("p",Ss,a(o.skill_name),1),t("div",Is,[t("span",{class:I(["px-2 py-0.5 rounded-full text-xs font-medium",pt(o.proficiency)])},a(o.proficiency),3),o.years_experience?(l(),n("span",Rs,a(o.years_experience)+" yr"+a(o.years_experience!==1?"s":""),1)):c("",!0)])])]),t("button",{onClick:jt=>wt(o.skill_name),class:"p-1.5 text-gray-400 hover:text-red-500 dark:hover:text-red-400 rounded",title:r(s)("Remove skill")},[...e[104]||(e[104]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])],8,Ts)]))),128))])):(l(),n("div",Vs,[e[105]||(e[105]=t("i",{class:"fa-solid fa-star text-3xl mb-3 block"},null,-1)),t("p",Us,a(r(s)("No skills recorded yet")),1)]))])):c("",!0),V.value==="assignments"?(l(),n("div",As,[t("h3",Ms,a(r(s)("Assignment History")),1),H.value.length>0?(l(),n("div",Ns,[(l(!0),n(z,null,X(H.value,o=>(l(),n("div",{key:o.name,class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[t("div",Fs,[t("div",Es,[t("p",Bs,a(o.task_subject||o.task),1),o.project_name?(l(),n("p",Ls,a(o.project_name),1)):c("",!0),t("div",Os,[o.start_date?(l(),n("span",Ks,a(Q(o.start_date)),1)):c("",!0),o.start_date&&o.end_date?(l(),n("span",Hs,"→")):c("",!0),o.end_date?(l(),n("span",Ps,a(Q(o.end_date)),1)):c("",!0),o.allocated_hours?(l(),n("span",zs,a(o.allocated_hours)+"h allocated",1)):c("",!0),o.actual_hours?(l(),n("span",Ws,a(o.actual_hours)+"h actual",1)):c("",!0)])]),t("span",{class:I(["px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0",kt(o.status)])},a(o.status),3)])]))),128))])):B.value?(l(),n("div",qs,[e[106]||(e[106]=t("i",{class:"fa-solid fa-clipboard-list text-3xl mb-3 block"},null,-1)),t("p",Gs,a(r(s)("No assignments found")),1)])):(l(),n("div",Js,[...e[107]||(e[107]=[t("i",{class:"fa-solid fa-spinner fa-spin text-xl text-gray-400"},null,-1)])]))])):c("",!0),V.value==="defects"?(l(),n("div",Qs,[t("div",Xs,[t("h3",Ys,a(r(s)("Defects & Issues")),1),t("button",{onClick:e[56]||(e[56]=o=>O.value=!0),class:"px-3 py-1.5 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600"},[e[108]||(e[108]=t("i",{class:"fa-solid fa-plus mr-1"},null,-1)),h(" "+a(r(s)("Report Defect")),1)])]),i.value&&i.value.defects.total>0?(l(),n("div",Zs,[t("div",tr,[t("p",er,a(i.value.defects.total),1),t("p",ar,a(r(s)("Total")),1)]),t("div",sr,[t("p",{class:I(["text-lg font-bold",i.value.defects.open>0?"text-red-600 dark:text-red-400":"text-gray-800 dark:text-gray-100"])},a(i.value.defects.open),3),t("p",rr,a(r(s)("Open")),1)]),t("div",or,[t("p",lr,a(r(g)(i.value.defects.total_cost)),1),t("p",nr,a(r(s)("Total Cost")),1)])])):c("",!0),G.value.length>0?(l(),n("div",dr,[(l(!0),n(z,null,X(G.value,o=>(l(),n("div",{key:o.name,class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[t("div",ir,[t("div",gr,[t("p",ur,a(o.title),1),t("div",xr,[t("span",{class:I(["px-2 py-0.5 rounded-full text-xs font-medium",bt(o.status)])},a(o.status),3),t("span",{class:I(["px-2 py-0.5 rounded-full text-xs font-medium",vt(o.severity)])},a(o.severity),3),t("span",yr,a(o.defect_type),1)]),t("div",cr,[o.project_name?(l(),n("span",pr,a(o.project_name),1)):c("",!0),t("span",null,a(r(s)("Reported {0}",[Q(o.reported_date)])),1),o.actual_cost?(l(),n("span",vr,a(r(s)("Cost: {0}",[r(g)(o.actual_cost)])),1)):o.cost_estimate?(l(),n("span",br,a(r(s)("Est: {0}",[r(g)(o.cost_estimate)])),1)):c("",!0)])])])]))),128))])):U.value?(l(),n("div",kr,[e[109]||(e[109]=t("i",{class:"fa-solid fa-check-circle text-3xl mb-3 block text-green-400"},null,-1)),t("p",fr,a(r(s)("No defects reported")),1)])):(l(),n("div",mr,[...e[110]||(e[110]=[t("i",{class:"fa-solid fa-spinner fa-spin text-xl text-gray-400"},null,-1)])]))])):c("",!0),V.value==="financial"?(l(),n("div",_r,[i.value?(l(),n("div",hr,[t("div",wr,[t("h3",Cr,a(r(s)("Rates")),1),t("div",$r,[t("div",jr,[t("span",Dr,a(r(s)("Hourly Cost")),1),t("span",Sr,a(r(g)(i.value.financial.hourly_cost))+"/hr",1)]),t("div",Ir,[t("span",Rr,a(r(s)("Billable Rate")),1),t("span",Tr,a(r(g)(i.value.financial.billable_rate))+"/hr",1)]),i.value.financial.billable_rate&&i.value.financial.hourly_cost?(l(),n("div",Vr,[t("span",Ur,a(r(s)("Margin")),1),t("span",Ar,a(r(g)(i.value.financial.billable_rate-i.value.financial.hourly_cost))+"/hr ",1)])):c("",!0)])]),t("div",Mr,[t("h3",Nr,a(r(s)("Time & Revenue")),1),t("div",Fr,[t("div",Er,[t("span",Br,a(r(s)("Total Hours Logged")),1),t("span",Lr,a(Math.round(i.value.time_logs.total_hours))+"h",1)]),t("div",Or,[t("span",Kr,a(r(s)("Billable Hours")),1),t("span",Hr,a(Math.round(i.value.financial.total_billed_hours))+"h",1)]),t("div",Pr,[t("span",zr,a(r(s)("Total Cost to Org")),1),t("span",Wr,a(r(g)(i.value.financial.total_cost_to_org)),1)])])]),t("div",qr,[t("h3",Gr,a(r(s)("Defect Cost Impact")),1),t("div",Jr,[t("div",null,[t("p",Qr,a(r(s)("Total Defect Cost")),1),t("p",{class:I(["text-lg font-bold mt-1",i.value.financial.defect_cost>0?"text-red-600 dark:text-red-400":"text-gray-800 dark:text-gray-100"])},a(r(g)(i.value.financial.defect_cost)),3)]),t("div",null,[t("p",Xr,a(r(s)("Estimated Cost")),1),t("p",Yr,a(r(g)(i.value.defects.total_estimate)),1)]),t("div",null,[t("p",Zr,a(r(s)("Defects Resolved")),1),t("p",to,a(i.value.defects.resolved)+" / "+a(i.value.defects.total),1)])])])])):c("",!0)])):c("",!0),(l(),dt(it,{to:"body"},[E.value?(l(),n("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:e[58]||(e[58]=tt(o=>E.value=!1,["self"]))},[t("div",eo,[t("h3",ao,a(r(s)("Delete Contact")),1),t("p",so,a(r(s)("Are you sure you want to delete {0}? This action cannot be undone.",[d.value.resource_name])),1),t("div",ro,[t("button",{onClick:e[57]||(e[57]=o=>E.value=!1),class:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700"},a(r(s)("Cancel")),1),t("button",{onClick:Ct,class:"px-4 py-2 text-sm text-white bg-red-500 rounded-lg hover:bg-red-600"},a(r(s)("Delete")),1)])])])):c("",!0)])),Y(de,{"is-open":O.value,"contact-name":b.value,onClose:e[59]||(e[59]=o=>O.value=!1),onCreated:$t},null,8,["is-open","contact-name"])],64)):c("",!0)])}}});export{io as default};
